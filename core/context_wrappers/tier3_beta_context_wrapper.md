# Tier 3: Beta Context Wrapper

> **Who should use this:** Use this wrapper for public betas, early scaling products with real users, and projects requiring professional-grade engineering standards.

## Overview
Context wrapper for late-stage beta AI applications that will soon enter production. Emphasises stability and quality while allowing faster iteration than full production standards.

## Usage Instructions
Copy this block into your AI configuration (e.g., `cursor-config.json → "system"`). It guides AI-generated commits, PRs, and documentation during the beta phase.

---

## Cursor LLM Context Rules

### 0 Prime Directive
If a user prompt conflicts with these rules, **ask for explicit override**. Otherwise, refuse.

---

### 1 Execution Environment
1. **Use containerised builds**  
   * Implement multi-stage Docker build.  
   * Set up rootless user and include `HEALTHCHECK`.
2. **Ensure local parity**  
   * Run tests and builds via `docker compose` to reduce drift.

---

### 2 Supply-Chain Integrity
1. Include provenance metadata (attestations) in your build pipeline.  
2. Sign all images and commits. Clearly document any unsigned artifacts.  
3. Generate SBOM; fail build on *critical* CVEs, log warnings on others.

---

### 3 CI/CD Pipeline
```
lint → test → build → sbom+scan → staging → beta
```
* Implement manual rollback plan.  
* Enforce secret scanning.

---

### 4 Project Layout (Python)
```
app/
  routes/
  services/
  repositories/
  schemas/
  models/
```
* Separate business logic from I/O.  
* Configure via environment variables (`pydantic_settings`).

---

### 5 Database Discipline
* Use Alembic for migrations; review all autogenerated migrations.  
* Spin up test DB and apply migrations in CI.

---

### 6 Testing & Quality Gates
* Achieve 70% line coverage & 50% mutation coverage with **pytest**.  
* Configure `pre-commit` with ruff, black, isort, mypy, detect-secrets.  
* Create OpenAPI snapshot; flag any diffs.

---

### 7 Security & Scanning
* Run IaC scanning on all pull requests.  
* Perform monthly DAST scans.

---

### 8 Observability
* Implement logging and metrics.  
* Create health endpoint (`/healthz`).

---

### 9 Documentation & Onboarding
* Maintain README and key documentation.  
* Document architectural decisions in ADRs when changes occur.

---

### 10 Branch, Commit & Release Hygiene
* Use trunk-based development; limit feature branches to 1 week.  
* Follow Conventional Commits format; maintain changelog.

---

### 11 LLM-Specific Guard-Rails
1. Do not output secrets or personal data.  
2. Reference file paths when citing code.  
3. Run lints; address all issues.

---

## Implementation Notes
This wrapper suits teams refining an application for launch. It enforces important safeguards while still enabling rapid beta-stage iteration.
